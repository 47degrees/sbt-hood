<!DOCTYPE html><html><head><title>SBT-Hood: GitHub integration</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="47 Degrees Open Source" /><meta name="description" content="A SBT plugin for comparing benchmarks in your PRs" /><meta name="og:image" content="/sbt-hood/img/poster.png" /><meta name="image" property="og:image" content="/sbt-hood/img/poster.png" /><meta name="og:title" content="SBT-Hood: GitHub integration" /><meta name="title" property="og:title" content="SBT-Hood: GitHub integration" /><meta name="og:site_name" content="SBT-Hood" /><meta name="og:url" content="https://github.com/47degrees/sbt-hood" /><meta name="og:type" content="website" /><meta name="og:description" content="A SBT plugin for comparing benchmarks in your PRs" /><link rel="icon" type="image/png" href="/sbt-hood/img/favicon.png" /><meta name="twitter:title" content="SBT-Hood: GitHub integration" /><meta name="twitter:image" content="/sbt-hood/img/poster.png" /><meta name="twitter:description" content="A SBT plugin for comparing benchmarks in your PRs" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/sbt-hood/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/sbt-hood/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/sbt-hood/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/sbt-hood/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/sbt-hood/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/sbt-hood/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/sbt-hood/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/sbt-hood/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/sbt-hood/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/sbt-hood/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/sbt-hood/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/sbt-hood/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/sbt-hood/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/sbt-hood/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/sbt-hood/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/sbt-hood/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/sbt-hood/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/sbt-hood/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/sbt-hood/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/sbt-hood/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/sbt-hood/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/sbt-hood/css/light-style.css" /><link rel="stylesheet" href="/sbt-hood/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/sbt-hood/" class="brand"><div class="brand-wrapper"></div><span>SBT-Hood</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/sbt-hood/" title="Getting Started" class="">Getting Started</a></div> <div class="sidebar-nav-item active "><a href="/sbt-hood/github-integration/" title="GitHub integration" class="active">GitHub integration</a></div> <div class="sidebar-nav-item  "><a href="https://47degrees.github.io/hood/" title="Hood home" class="">Hood home</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/47degrees/sbt-hood" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/47degrees/sbt-hood" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="47degrees" data-github-repo="sbt-hood"><div class="content-wrapper"><section><h1 id="github-integration">GitHub integration</h1>

<p><em>sbt-hood</em> can also output comparison results to a GitHub pull request as comments, as well as
setting mergeability states. This allows you to set up the plugin within your CI pipelines and avoid
merging code that decreases your performance under the thresholds you’ve specified to the plugin.</p>

<p>In order to allow <em>sbt-hood</em> to communicate with GitHub you’ll need to set these additional settings:</p>

<ul>
  <li><code class="highlighter-rouge">token</code>: GitHub access token. It can be generated by browsing to <code class="highlighter-rouge">Developer settings &gt; Personal access tokens</code> within your user settings.</li>
  <li><code class="highlighter-rouge">repositoryOwner</code>: owner of the repository where the plugin will post updates.</li>
  <li><code class="highlighter-rouge">repositoryName</code>: name of the repository where the plugin will post updates.</li>
  <li><code class="highlighter-rouge">pullRequestNumber</code>: pull request number where the plugin will post updates.</li>
  <li><code class="highlighter-rouge">targetUrl</code>: optional URL to the CI job, allowing GitHub to show a link to your CI job besides the mergeability status (i.e.: <code class="highlighter-rouge">TRAVIS_JOB_WEB_URL</code> under TravisCI).</li>
  <li><code class="highlighter-rouge">shouldBlockMerge</code>: if set to <code class="highlighter-rouge">true</code>, <em>sbt-hood</em> will ask GitHub to block the current PR in case a benchmark has produced errors. Defaults to <code class="highlighter-rouge">true</code>.</li>
</ul>

<p>Once these are set up, you can configure your CI scripts to call the following <em>sbt-hood</em> command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compareBenchmarksCI
</code></pre></div></div>

<p>This command runs the previously described <code class="highlighter-rouge">compareBenchmarks</code> command (thus showing the comparison
results in your CI job logs), and later sends a request to GitHub API to create a state for your
pull request. Any comparison resulting in an <code class="highlighter-rouge">error</code> for any of your benchmarks will create an
erroneous state in your pull request, thus disallowing mergeability until these are taken care of.</p>

<p>By fine tuning the different settings of the plugin within your CI pipelines you can make sure that
your applications stay performant during every code iteration.</p>

<h1 id="uploading-benchmark-reports-to-github">Uploading benchmark reports to GitHub</h1>

<p>In addition to controlling the state of your pull requests, <code class="highlighter-rouge">sbt-hood</code> provides an additional task
that allows uploading benchmark report files (generated by <code class="highlighter-rouge">compareBenchmarks</code> and 
<code class="highlighter-rouge">compareBenchmarksCI</code>, provided that <code class="highlighter-rouge">outputToFile</code> is set to <code class="highlighter-rouge">true</code>). To allow <code class="highlighter-rouge">sbt-hood</code> to upload
your reports, the following settings are available (take into account that the previously described 
GitHub settings are also required for uploads to work):</p>

<ul>
  <li><code class="highlighter-rouge">benchmarkFiles</code>: list of files to be uploaded. By default it contains an empty list (in this case, uploading to GitHub will fail).</li>
  <li><code class="highlighter-rouge">uploadDirectory</code>: target path in your repository to upload the benchmark report files. By default it’s set to <code class="highlighter-rouge">benchmarks</code>.</li>
  <li><code class="highlighter-rouge">commitMessage</code>: each time benchmark reports are uploaded, a new commit will be push to your repository.</li>
  <li><code class="highlighter-rouge">branch</code>: target branch in your repository to upload the benchmark report files. By default it’s set to <code class="highlighter-rouge">master</code>.</li>
</ul>

<p>Once configured you can set up your CI to upload your report files by calling the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uploadBenchmarks
</code></pre></div></div>

<p>By keeping these reports in your repository you can track the performance of key aspects of your code as it continues to evolve.</p>
</section></div></div></div></div><script src="/sbt-hood/highlight/highlight.pack.js"></script><script src="/sbt-hood/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: '47deg/sbthood'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/sbt-hood/js/search.js"></script><script src="/sbt-hood/js/docs.js"></script></body></html>